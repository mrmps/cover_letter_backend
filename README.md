# README - Cover Letter Generation API

## Introduction
This is a FastAPI application that helps to generate cover letters for job applications. It utilizes the capabilities of OpenAI's GPT-4 to process resumes and job descriptions and produce a well-written, personalized cover letter. The application also incorporates a feedback loop to refine the cover letter and produce a more polished final product.

## Dependencies
- FastAPI
- Pydantic
- OpenAI GPT-4
- BeautifulSoup4
- requests
- PyMuPDF (fitz)
- langchain (a custom library)

## Application Structure
This application primarily consists of a single API endpoint: `/generate_cover_letter`. It accepts a PDF file containing the applicant's resume and an optional URL where the job description can be scraped from.

The application makes use of custom classes (`ChatOpenAI`, `LLMChain`, and `SequentialChain`) and a custom function (`PromptTemplate`) to manage the interactions with the GPT-4 API. It uses an iterative, chain-based process to generate the cover letter and refine it with feedback.

The sequence of steps is as follows:

1. Process the uploaded resume and generate a YAML representation (`chain1`)
2. Scrape the job description from the provided URL and generate a YAML representation (`chain2`)
3. Generate an initial cover letter based on the resume and job description (`chain3`)
4. Get feedback on the initial cover letter (`chain4`)
5. Generate a final cover letter based on the initial cover letter and the feedback (`chain5`)
6. Get a second round of feedback on the final cover letter (`chain6`)
7. Generate an "ultimate" cover letter based on the final cover letter and the second round of feedback (`chain7`)

## Setup and Run
To run the application, you first need to install the dependencies. Assuming you have Python installed, you can do this with pip:

```
pip install fastapi pydantic openai beautifulsoup4 requests PyMuPDF
```

For the `langchain` library, you need to follow the specific installation instructions provided by the library's developer.

Once the dependencies are installed, you can start the application with the following command:

```
uvicorn main:app --reload
```

Then, to use the `/generate_cover_letter` endpoint, make a POST request to `http://localhost:8000/generate_cover_letter`. You need to include a file parameter `pdf` with the resume file, and an optional string parameter `url` with the job description URL.

Please note that to run this application, you need an OpenAI API key, which is used to access the GPT-4 model.

## Output
The application returns the "ultimate" cover letter generated by the final chain. This will be a polished, well-written cover letter based on the resume and job description provided, refined with feedback from multiple sources. The cover letter should be suitable to be used in a real-world job application.

## Conclusion
This application showcases the powerful capabilities of the GPT-4 model in a practical setting. By combining it with other libraries and tools, we can automate the process of writing cover letters, reducing the effort needed and potentially increasing the chances of success in the job application process.